!function(v){v.su.moduleManager.define("wirelessSettings",{models:["lanAdvLanModel","regionWirelessModel","regionWirelessCapabilityModel","wirelessSettingsControl","ofdmaModel","twtModel","wirelessSmartConn","wireless24g","wireless5g1","wireless5g2","wireless6g","ffsModel"],stores:["regionStore","ofdmaMumimoStore"],services:["moduleLoader","ajax","device","moduleManager"],views:["wirelessSettingsView"],deps:["utils","main"],listeners:{ev_on_launch:function(e,s,a,i,n,r,l){a.wirelessSettingsView.ofdmaMumimo.hide(),s.supportOfdmaMumimo?(s.hideStandaloneOfdmaAndMimo(),i.ofdmaModel.load()):l.device.getOFDMA()?(i.ofdmaModel.enable.show(),i.ofdmaModel.load()):i.ofdmaModel.enable.hide(),l.device.getConfig().supportTWT&&(i.twtModel.enable.show(),i.twtModel.load()),s.supportWifi6E&&(a.wirelessSettingsView.wirelessSettingsPanel.setInstruction(v.su.CHAR.WIRELESS_SETTINGS.WIRELESS_SETTINGS_INTRO_6G),i.wirelessSmartConn.smartEnable.setToolTip(v.su.CHAR.WIRELESS_SETTINGS.SMART_CONN_NOTE_6G)),this.prepare().done(function(){s.launchModules()})},ev_region_reload:function(){}},init:function(m,c,f,e,S,h){this.control({".index-common-save-btn":{ev_will_auto_save:function(e,s,a){for(var i,n,r,l,t,o,d,u,g=!1,p=0,w=a.length;p<w;p++)-1<a[p].dataObj.name.indexOf("wireless")&&(g=!0);g&&(i=h.moduleManager.get("wirelessAdv24g"),n=h.moduleManager.get("wirelessAdv5g1"),r=i.getWifiInfo(),l=n.getWifiInfo(),m.isTriband&&(o=(t=h.moduleManager.get("wirelessAdv5g2")).getWifiInfo()),m.supportWifi6E&&(u=(d=h.moduleManager.get("wirelessAdv6g")).getWifiInfo()),"on"===f.wirelessSmartConn.smartEnable.getValue()&&(c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.SMART_CONN),m.supportWifi6E&&m.isTriband&&c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G1_5G2),m.supportWifi6E&&!m.isTriband&&c.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G),l.enable=r.enable,m.isTriband)&&(o.enable=r.enable),!i.beforeSubmit()||!n.beforeSubmit()||t&&!t.beforeSubmit()||d&&!d.beforeSubmit()||(r.enable||l.enable||m.isTriband&&o.enable||m.supportWifi6E&&u.enable?r.enable||l.enable||m.isTriband&&o.enable||!m.supportWifi6E||!u.enable?m.submitWirelessSetting():S.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.WLAN_ONLY_6G_NOTE,function(){m.submitWirelessSetting()},null,v.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY):S.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.WLAN_ONT_ON_NOTE,function(){m.submitWirelessSetting()},null,v.su.CHAR.WIRELESS_SETTINGS.DISABLE_ANYWAY)))}}}),this.listen({"models.regionWirelessModel":{ev_loaded:function(e,s){var a=f.regionWirelessModel.capability.getValue();f.regionWirelessCapabilityModel.loadData(a,!0),m.region=s.country.toUpperCase(),m.initRegionData(),m.trigger("ev_region_reload")}},"models.ffsModel":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless24g":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g1":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless5g2":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless6g":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wirelessSmartConn":{ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wirelessSmartConn.smartEnable":{ev_value_change:function(e,s,a){"on"===s?(h.moduleManager.get("wirelessAdv5g1").setEnableLabel(!0),h.moduleManager.get("wirelessAdv24g").setEnableLabel(!0),m.isTriband&&h.moduleManager.get("wirelessAdv5g2").setEnableLabel(!0)):(h.moduleManager.get("wirelessAdv5g1").setEnableLabel(),h.moduleManager.get("wirelessAdv24g").setEnableLabel(),m.isTriband&&h.moduleManager.get("wirelessAdv5g2").setEnableLabel())}},"views.wirelessSettingsView.ofdmaMumimo":{ev_value_change:function(e,s,a){a&&m.setOFDMAWithMimo(s)}}})}},function(S,u,h,e,g,_){var t=null,n=!0,r=!0,l=!0,o=!0,s="24g",a="5g1",i="5g2",d="6g",p=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144],w=_.device.getIsTriband(),m=_.device.getConfig().supportWifi6E,c=[s,a];return w&&c.push(i),m&&c.push(d),{isTriband:w,supportWifi6E:m,supportOfdmaMumimo:_.device.getConfig().supportOfdmaMumimo,supportOverlapWithDFS:_.device.getConfig().supportOverlapWithDFS,isConnectionInterrupted:function(){for(var e=!1,s=0;s<c.length;s++){var a=c[s];if(/5g/i.test(a)){var i=h["wireless"+a]["htmode"],n=h["wireless"+a]["channel"],a=S.getWirelessInfo(a);if(!S.supportOverlapWithDFS&&i.isDirty()&&"160"==a.htmode){e=!0;break}if(n.isDirty()&&p.includes(a.channel)){e=!0;break}}}return e},getLanIP:function(){return h.lanAdvLanModel.ipaddr.getValue()},prepare:function(){var e=v.Deferred(),s=!1,a=!1;return h.regionWirelessModel.load({success:function(){a=!0,s&&e.resolve(!0)}}),h.lanAdvLanModel.load({success:function(){s=!0,a&&e.resolve(!0)}}),e.promise()},MODE:{ADVANCED:"advanced",BASIC:"basic",QUICK_SETUP:"qs"},setMode:function(e){t=e},getMode:function(){return t},has2g:function(){return n},has5g1:function(){return r},has5g2:function(){return l},has6g:function(){return o},launchModules:function(){function e(e){var s;switch(t){case S.MODE.ADVANCED:s=e+"View";break;case S.MODE.BASIC:s=e+"ViewBasic";break;case S.MODE.QUICK_SETUP:s=e+"ViewQs";break;default:s=e+"View"}return s}h.wirelessSettingsControl.detailFreqConfigField.show();var s=v.Deferred(),a=v.Deferred(),i=v.Deferred(),n=(dfd6g=v.Deferred(),""),r="",l="";enable6g="",S.has2g()&&_.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv24g",view:e("wirelessAdv24g")},h.wirelessSettingsControl.wirelessSettings24gLoader,function(){var e=_.moduleManager.get("wirelessAdv24g");v.when(e.dfd).then(function(){n=e.getHwMode(),s.resolve()})}),S.has5g1()&&_.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g1",view:e("wirelessAdv5g1")},h.wirelessSettingsControl.wirelessSettings5g1Loader,function(){S.isTriband?u.wirelessSettingsView.wirelessTitle5g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G1):(_.moduleManager.get("wirelessAdv5g1").set5g1Name(),u.wirelessSettingsView.wirelessTitle5g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_5G));var e=_.moduleManager.get("wirelessAdv5g1");v.when(e.dfd).then(function(){r=e.getHwMode(),a.resolve()})}),S.isTriband&&_.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv5g2",view:e("wirelessAdv5g2")},h.wirelessSettingsControl.wirelessSettings5g2Loader,function(){var e=_.moduleManager.get("wirelessAdv5g2");v.when(e.dfd).then(function(){l=e.getHwMode(),i.resolve()})}),S.supportWifi6E&&_.moduleLoader.load({module:"wirelessSettings"},{module:"wirelessAdv6g",view:e("wirelessAdv6g")},h.wirelessSettingsControl.wirelessSettings6gLoader,function(){var e=_.moduleManager.get("wirelessAdv6g");v.when(e.dfd).then(function(){enable6g=e.getWirelessEnable(),dfd6g.resolve()})}),S.isTriband||S.supportWifi6E?S.isTriband&&!S.supportWifi6E?v.when(s,a,i).then(function(){"bgn"==n&&"anac_5"==r&&"anac_5"==l?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable()),S.initOfdmaAndMimo()}):!S.isTriband&&S.supportWifi6E?v.when(s,a,dfd6g).then(function(){"bgn"==n&&"anac_5"==r&&"off"==enable6g?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable()),S.initOfdmaAndMimo()}):v.when(s,a,i,dfd6g).then(function(){"bgn"==n&&"anac_5"==r&&"anac_5"==l&&"off"==enable6g?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable()),S.initOfdmaAndMimo()}):v.when(s,a).then(function(){"bgn"==n&&"anac_5"==r?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable()),S.initOfdmaAndMimo()})},showDetailFreqConfig:function(){h.wirelessSettingsControl.detailFreqConfigField.show()},hideDetailFreqConfig:function(){h.wirelessSettingsControl.detailFreqConfigField.hide()},initRegionData:function(){var e=h.regionWirelessCapabilityModel.channel2g.getValue(),s=h.regionWirelessCapabilityModel.channel5g.getValue(),a=h.regionWirelessCapabilityModel.channel5g2.getValue(),i=h.regionWirelessCapabilityModel.channel6g.getValue();g.utils.isEmptyObject(e)&&(n=!1),g.utils.isEmptyObject(s)&&(r=!1),g.utils.isEmptyObject(a)&&(l=!1),g.utils.isEmptyObject(i)&&(o=!1)},showWlanOnSmartOffSaveNote:function(){u.wirelessSettingsView.wirelessOnSmartOffNote.show()},loadWifiInfo:function(e,s,a,i){var n=u.wirelessSettingsView,r=h.wirelessSmartConn.smartEnable.getValue();"on"===r?(S.supportWifi6E&&S.isTriband&&u.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G1_5G2),S.supportWifi6E&&!S.isTriband&&u.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G_5G)):u.wirelessSettingsView.wirelessNetwork24g.setLabelField(v.su.CHAR.WIRELESS_SETTINGS.NETWORK_24G),e.enable?(n.wirelessNote24g.show(),n.wirelessName24g.setValue(e.ssid),n.wirelessPassword24g.setValue(""===e.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:e.password)):n.wirelessNote24g.hide(),s.enable&&"on"!==r?(n.wirelessNote5g.show(),n.wirelessName5g.setValue(s.ssid),n.wirelessPassword5g.setValue(""===s.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:s.password)):n.wirelessNote5g.hide(),a&&a.enable&&"on"!==r?(n.wirelessNote5g2.show(),n.wirelessName5g2.setValue(a.ssid),n.wirelessPassword5g2.setValue(""===a.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:a.password)):n.wirelessNote5g2.hide(),i&&i.enable?(n.wirelessNote6g.show(),n.wirelessName6g.setValue(i.ssid),n.wirelessPassword6g.setValue(""===i.password?v.su.CHAR.WIRELESS_SETTINGS.NO_PASSWORD:i.password)):n.wirelessNote6g.hide()},updateGuestNetwork:function(){var e;"basic"==S.getMode()&&(e=_.moduleManager.get("guestNetworkModule"))&&e.checkStatus()},replaceData:function(){var e=h.wireless24g.getData();delete e.htmode,delete e.hwmode,delete e.channel,delete e.htmode,h.wireless5g1.replaceData(e),S.isTriband&&h.wireless5g2.replaceData(e)},getWirelessUrl:function(){var e=["form=wireless_2g","form=wireless_5g"];return S.isTriband&&e.push("form=wireless_5g_2"),S.supportWifi6E&&e.push("form=wireless_6g"),"/admin/wireless?"+e.join("&")},submitWirelessSetting:function(){var e,s,a,i,n=h.wireless24g.enable.getValue(),r=(_.device.getConfig().supportAmazonFFS&&h.ffsModel.isDirty()&&"on"===n&&h.ffsModel.submit(),S.setOFDMAWithMimo(u.wirelessSettingsView.ofdmaMumimo.getValue()),"on"===h.wirelessSmartConn.smartEnable.getValue()&&S.replaceData(),_.moduleManager.get("wirelessAdv24g")),l=_.moduleManager.get("wirelessAdv5g1"),t=S.getWirelessUrl(),o=r.getHwMode(),d=l.getHwMode();S.isTriband&&(e=_.moduleManager.get("wirelessAdv5g2"),a=e.getHwMode()),S.supportWifi6E&&(s=_.moduleManager.get("wirelessAdv6g"),i=s.getWirelessEnable()),!r.beforeSubmit()||!l.beforeSubmit()||e&&!e.beforeSubmit()||s&&!s.beforeSubmit()||(S.isConnectionInterrupted()?g.main.confirm(v.su.CHAR.WIRELESS_SETTINGS.SECOND_CHECK_ENABLE_160_MHZ_NOTE,function(){S.doSubmitWirelessSetting(r,l,e,s,o,d,a,i,t)},null,v.su.CHAR.OPERATION.CONTINUE,v.su.CHAR.OPERATION.CANCEL):S.doSubmitWirelessSetting(r,l,e,s,o,d,a,i,t))},doSubmitWirelessSetting:function(n,r,l,t,o,d,u,g,e){var s=n.syncMainModel(),a=r.syncMainModel(),i=l&&l.syncMainModel(),p=t&&t.syncMainModel();if("on"===h.wirelessSmartConn.smartEnable.getValue()){delete s.wireless_2g_channel,delete s.wireless_2g_htmode,delete s.wireless_2g_hwmode;var w,m=[];for(w in s)m.push(w);for(var c=0;c<m.length;c++){var f=s[m[c]];a[m[c].replace(/_2g/g,"_5g")]=f,S.isTriband&&(a[m[c].replace(/_2g/g,"_5g_2")]=f)}a.wireless_5g_hwmode=d,S.isTriband&&(i.wireless_5g_2_hwmode=u),s=n.syncMainModel()}h.wirelessSmartConn.submit(),_.ajax.request({url:v.su.url(e),data:v.extend(!0,{operation:"write_spf"},s,a,i,p),success:function(){var e,s,a=n.getWifiInfo(),i=r.getWifiInfo();S.isTriband||S.supportWifi6E?S.isTriband&&!S.supportWifi6E?(e=l.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"anac_5"==u?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable())):!S.isTriband&&S.supportWifi6E?(s=t.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"off"==g?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable())):(e=l.getWifiInfo(),s=t.getWifiInfo(),"bgn"==o&&"anac_5"==d&&"anac_5"==u&&"off"==g?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable())):"bgn"==o&&"anac_5"==d?(h.ofdmaModel.enable.disable(),h.twtModel.enable.disable()):(h.ofdmaModel.enable.enable(),S.supportOfdmaMumimo&&!S.hasAxHwMode()||h.twtModel.enable.enable()),S.loadWifiInfo(a,i,e,s),("on"==h.wireless24g.enable.getValue()||"on"==h.wireless5g1.enable.getValue()||S.isTriband&&"on"==h.wireless5g2.enable.getValue()||S.supportWifi6E&&"on"==h.wireless6g.enable.getValue())&&S.showWlanOnSmartOffSaveNote(),n.syncWifiSharingData(),r.syncWifiSharingData(),l&&l.syncWifiSharingData(),t&&t.syncWifiSharingData(),S.updateGuestNetwork(),h.wireless24g.record(),h.wireless5g1.record(),h.wireless5g2.record(),h.wireless6g.record()}})},setOFDMAWithMimo:function(e){switch(e){case"all":S.setOfdmaAndMimo("on","on");break;case"ofdma":S.setOfdmaAndMimo("on","off");break;case"disable":S.setOfdmaAndMimo("off","off")}},modeChangeSet:function(){S.hasAxHwMode()?(h.twtModel.enable.enable(),u.wirelessSettingsView.ofdmaMumimo.enable()):(S.setOfdmaAndMimo("off","on"),h.twtModel.enable.disable(),u.wirelessSettingsView.ofdmaMumimo.setValue("disable"),u.wirelessSettingsView.ofdmaMumimo.disable())},getWirelessInfo:function(e){e=h["wireless"+e].getData();return e&&"on"===e.enable?e:{}},initOfdmaAndMimo:function(){if(!S.supportOfdmaMumimo)return!1;var e="on"===h.ofdmaModel.enable.getValue(),s=c.reduce(function(e,s){return e||"on"===S.getWirelessInfo(s)["mimo"]},!1);u.wirelessSettingsView.ofdmaMumimo.setValue(e?s?"all":"ofdma":"disable"),u.wirelessSettingsView.ofdmaMumimo.show(),S.modeChangeSet()},hideStandaloneOfdmaAndMimo:function(){h.ofdmaModel.enable.hide(),c.forEach(function(e){h["wireless"+e]["mimo"].hide()})},hasAxHwMode:function(){return c.reduce(function(e,s){s=S.getWirelessInfo(s)["hwmode"]||[];return e||-1<s.indexOf("ax")},!1)},setOfdmaAndMimo:function(e,s){h.ofdmaModel.enable.enable(),h.ofdmaModel.enable.setValue(e),c.forEach(function(e){h["wireless"+e]["mimo"].setValue(s)})}}})}(jQuery),$.su.modelManager.define("wirelessSmartConn",{type:"model",fields:[{name:"smartEnable",mapping:"smart_enable"}],proxy:{url:$.su.url("/admin/wireless?form=smart_connect")}}),$.su.storeManager.define("encryptionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:$.su.securityCode.no_security,name:$.su.CHAR.WIRELESS_SETTINGS.NO_SECURITY},{value:$.su.securityCode.psk_aes,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_AES},{value:$.su.securityCode.psk_aes_tkip,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_AES_TKIP},{value:$.su.securityCode.psk_sae_personal,name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL},{value:$.su.securityCode.psk_sae_personal_aes,name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL_AES},{value:$.su.securityCode.wpa_enterprise,name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_ENTERPRISE},{value:$.su.securityCode.wpa_enterprise_tkip,name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_ENTERPRISE}]}),$.su.storeManager.define("encryption6GStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"owe",name:$.su.CHAR.WIRELESS_SETTINGS.ENHANCED_OPEN},{value:"psk_sae",name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_PERSONAL}]}),$.su.storeManager.define("wirelessVersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2_PSK,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2_PSK,value:"rsn"}]}),$.su.storeManager.define("wirelessVersionEpStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.WPA_WPA2,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA2,value:"rsn"}]}),$.su.storeManager.define("wirelessWpa3VersionStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"sae_transition"},{name:$.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE,value:"sae_only"}]}),$.su.storeManager.define("wirelessCipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.TKIP_AES,value:"auto"},{name:$.su.CHAR.WIRELESS_SETTINGS.AES,value:"aes"}]}),$.su.storeManager.define("wireless24gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"aes"}]}),$.su.storeManager.define("wireless5gWpa3CipherStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"ccmp"}]}),$.su.storeManager.define("wepTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto",itemCls:"fix_min",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.OPEN_SYSTEM,value:"open"},{name:$.su.CHAR.WIRELESS_SETTINGS.SHARED_KEY,value:"shared"}]}),$.su.storeManager.define("wepKeySelectedStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"1",name:$.su.CHAR.WIRELESS_SETTINGS.KEY1},{value:"2",name:$.su.CHAR.WIRELESS_SETTINGS.KEY2},{value:"3",name:$.su.CHAR.WIRELESS_SETTINGS.KEY3},{value:"4",name:$.su.CHAR.WIRELESS_SETTINGS.KEY4}]}),$.su.storeManager.define("wepKeyFormatStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.ASCII,value:"asic",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.HEXADECIMAL,value:"hex"}]}),$.su.storeManager.define("wepKeyTypeStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.BIT64,value:"64",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.BIT128,value:"128"}]}),$.su.storeManager.define("transPowerStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{name:$.su.CHAR.WIRELESS_SETTINGS.LOW,value:"low",checked:!0},{name:$.su.CHAR.WIRELESS_SETTINGS.MIDDLE,value:"middle"},{name:$.su.CHAR.WIRELESS_SETTINGS.HIGH,value:"high"}]}),$.su.modelManager.define("regionWirelessModel",{type:"model",fields:[{name:"country",mapping:"country"},{name:"capability",mapping:"capability"}],proxy:{url:$.su.url("/admin/wireless?form=region")}}),$.su.modelManager.define("regionWirelessCapabilityModel",{type:"model",fields:[{name:"hwmode2g",mapping:"hwmode_2g"},{name:"hwmode5g",mapping:"hwmode_5g"},{name:"hwmode5g2",mapping:"hwmode_5g_2"},{name:"hwmode6g",mapping:"hwmode_6g"},{name:"htmode2g",mapping:"htmode_2g"},{name:"htmode5g",mapping:"htmode_5g"},{name:"htmode5g2",mapping:"htmode_5g_2"},{name:"htmode6g",mapping:"htmode_6g"},{name:"channel2g",mapping:"channel_2g"},{name:"channel5g",mapping:"channel_5g"},{name:"channel5g2",mapping:"channel_5g_2"},{name:"channel6g",mapping:"channel_6g"}]}),$.su.modelManager.define("localeCountryModel",{type:"model",fields:[{name:"country",mapping:"country"}],proxy:{url:"./data/locale.country.json"}}),$.su.storeManager.define("regionStore",{type:"store",fields:[{name:"name",convert:function(e){return $.su.CHAR.REGION[e]}},{name:"value"},{name:"noAutodetect",mapping:"no_autodetect"}],proxy:{url:"./data/region.json"}}),$.su.modelManager.define("wirelessSettingsControl",{type:"model",fields:[{name:"wirelessSettingsSmartConnLoader"},{name:"detailFreqConfigField"},{name:"wirelessSettings24gLoader"},{name:"wirelessSettings5g1Loader"},{name:"wirelessSettings5g2Loader"},{name:"wirelessSettings6gLoader"}]}),$.su.modelManager.define("ofdmaModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=ofdma")}}),$.su.modelManager.define("twtModel",{type:"model",fields:[{name:"enable",mapping:"enable"}],proxy:{url:$.su.url("/admin/wireless?form=twt")}}),$.su.storeManager.define("ofdmaMumimoStore",{type:"store",fields:[{name:"name"},{name:"value"}],data:[{value:"all",name:$.su.CHAR.WIRELESS_SETTINGS.OFDMA_AND_MU},{value:"ofdma",name:$.su.CHAR.WIRELESS_SETTINGS.OFDMA_ONLY},{value:"disable",name:$.su.CHAR.WIRELESS_SETTINGS.DISABLE}]}),function(p){p.su.moduleManager.define("wirelessAdv24g",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless24gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode2gStore","htmode2gStore","channel2gStore"],models:["wireless24g","wireless24gControl","regionWirelessCapabilityModel","quickSetupModel","wirelessSmartConn","ffsModel"],views:["wirelessAdv24gView","wirelessAdv24gViewBasic","wirelessAdv24gViewQs"],listeners:{ev_on_launch:function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=p.Deferred(),i.wirelessSmartConn.load(),i.wireless24g.load({success:function(){s.dfd.resolve()}}),s.supportAmazonFFS()&&(i.ffsModel.enable.show(),i.ffsModel.load())}},deps:["utils","wirelessSettings"],init:function(l,e,t,r,o,d){this.listen({"models.wirelessSmartConn.smartEnable":{ev_value_change:function(e,s,a){d.moduleManager.get("wirelessSettings").getMode();"on"!==t.wireless24g.enable.getValue()&&"on"!==s?t.wireless24gControl.editField.hide():t.wireless24gControl.editField.show(),"on"===s?(t.wireless24g.htmode.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_2G),t.wireless24g.channel.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_2G),t.wireless24g.hwmode.hide(),t.wireless24g.mimo.hide()):(t.wireless24g.htmode.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),t.wireless24g.channel.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL),t.wireless24g.hwmode.show(),1!=d.device.getConfig().supportOfdmaMumimo&&t.wireless24g.mimo.show())}},"models.wireless24g.enable":{ev_value_change:function(e,s,a){var i=t.wirelessSmartConn.smartEnable.getValue(),n=l.supportAmazonFFS(),r="";"on"===s?(this.disableAll=!1,t.wireless24gControl.editField.show(),p.inArray("2g",d.device.getConfig().supportMUMIMO)<0&&(t.wireless24g.mimo.hide(),t.wireless24g.mimo.disable()),!0===d.device.getConfig().supportOfdmaMumimo&&t.wireless24g.mimo.hide(),n&&(t.ffsModel.enable.enable(),t.ffsModel.enable.setTips(r))):(this.disableAll=!0,r="on"!==i?(t.wireless24gControl.editField.hide(),p.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_24G_DISABLE_NOTE):p.su.CHAR.WIRELESS_SETTINGS.AMAZON_WIFI_DISABLE_NOTE,n&&(t.ffsModel.enable.disable(),t.ffsModel.enable.setTips(r))),a&&o.wirelessSettings.modeChangeSet()}},"models.wireless24g.encryption":{ev_value_change:function(e,s,a){switch(t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide(),s){case p.su.securityCode.no_security:t.wireless24gControl.wpaPersonal24g.hide(),t.wireless24gControl.wpaEnterprise24g.hide();break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:t.wireless24g.pskKey.setVtype("psk_password"),t.wireless24gControl.wpaPersonal24g.show(),t.wireless24gControl.wpaEnterprise24g.hide();break;case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:t.wireless24g.pskKey.setVtype("wpa3_password"),t.wireless24gControl.wpaPersonal24g.show(),t.wireless24gControl.wpaEnterprise24g.hide();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:t.wireless24gControl.wpaEnterprise24g.show(),t.wireless24gControl.wpaPersonal24g.hide()}s==p.su.securityCode.psk_aes_tkip||s==p.su.securityCode.wpa_enterprise_tkip?t.wireless24g.hwmode.disableItems(["ax"]):t.wireless24g.hwmode.enableItems(["ax"]),s==p.su.securityCode.no_security||s==p.su.securityCode.psk_aes_tkip?t.wireless24g.encryption.setTips(p.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):t.wireless24g.encryption.setTips("")}},"models.wireless24g.hwmode":{ev_value_change:function(e,s,a){var i,n=t.regionWirelessCapabilityModel.channel2g.getValue();switch(n&&13<n.length&&(i=t.wireless24g.channel.getValue(),n=l.getHtChannel(n,20),"b"!=s&&n.pop(),r.channel2gStore.loadItems(n),o.utils.valInObjArr(i,n)?t.wireless24g.channel.setValue(i):t.wireless24g.channel.setValue("auto")),s){case"b":case"g":case"bg":t.wireless24g.htmode.disableItems(["40"]),t.wireless24g.htmode.setValue("auto"),t.wireless24g.htmode.hide();break;default:t.wireless24g.htmode.enableItems(["40"]),t.wireless24g.htmode.show()}"ax"==s?t.wireless24g.encryption.disableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]):t.wireless24g.encryption.enableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]),a&&!0===d.device.getConfig().supportOfdmaMumimo&&o.wirelessSettings.modeChangeSet()}},"models.wireless24g":{ev_loaded:function(e,s){d.ajax.request({proxy:"sysWireless2gProxy",data:{operation:"read"},success:function(e){e&&t.wireless24g&&t.wireless24g.channel&&("on"==e.ENABLE?t.wireless24g.channel.disable():t.wireless24g.channel.enable())}}),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}},"models.ffsModel":{ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(s,n,u,g,i,a){return{dfd:null,SYS_WIRELESS_2G_URL:p.su.url("/admin/wireless?form=syspara_2g"),isTriband:a.device.getIsTriband(),supportAmazonFFS:function(){var e=a.moduleManager.get("wirelessSettings").getMode();return a.device.getConfig().supportAmazonFFS&&"router"===a.device.getCurrentMode()&&"advanced"===e},onDestroy:function(){var e=a.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",s.handleRegionInfo)},handleRegionInfo:function(){var e=u.regionWirelessCapabilityModel.hwmode2g.getValue();if(e){for(var s=[],a=e.length,i=0;i<a;i++){var n={},r="MODE_"+e[i].toUpperCase();n.name=p.su.CHAR.WIRELESS_SETTINGS[r],n.value=e[i],s.push(n)}g.hwmode2gStore.loadData(s)}var l=u.regionWirelessCapabilityModel.htmode2g.getValue();if(l){var t=[],a=l.length;t[0]={name:"20/40"+p.su.CHAR.WIRELESS_SETTINGS.MHZ,value:"auto"};for(i=0;i<a;i++)(n={}).name=l[i]+p.su.CHAR.WIRELESS_SETTINGS.MHZ,n.value=l[i],t.push(n);g.htmode2gStore.loadData(t)}var o=u.regionWirelessCapabilityModel.channel2g.getValue();if(o){var d=[],a=o.length;d[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(i=0;i<a;i++)(n={}).name=o[i],n.value=o[i],d.push(n);g.channel2gStore.loadData(d)}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},beforeSubmit:function(){var e=u.wireless24g.server.getValue(),s=u.wireless24g.encryption.getValue(),a=u.wireless24g.enable.getValue();return u.wireless24g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s&&u.wireless24g.server.setValidator(function(){return i.utils.ipToInt(e)!=i.utils.ipToInt(i.wirelessSettings.getLanIP())||p.su.CHAR.ERROR["00000077"]}),u.wireless24g.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=n[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s="on"===u.wireless24g.enable.getValue(),a=u.wireless24g.ssid.getValue(),i=u.wireless24g.encryption.getValue();switch(u.wireless24g.encryption.getValue()){case p.su.securityCode.no_security:e="";break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:e=u.wireless24g.pskKey.getValue();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:e=u.wireless24g.wpaKey.getValue()}return{enable:s,ssid:a,password:e,security:i}},setEnableLabel:function(e){e?(u.wireless24g.enable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.WIRELESS_RADIO),a.device.getConfig().supportWifi6E&&!s.isTriband&&u.wireless24g.enable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_2G_5G),a.device.getConfig().supportWifi6E&&s.isTriband&&u.wireless24g.enable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_2G_5G1_5G2)):u.wireless24g.enable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_2G)},syncMainModel:function(){var e,s=u.wireless24g.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n=s[a[i]];s["wireless_2g_"+a[i]]=n,delete s[a[i]]}return s},getHwMode:function(){return u.wireless24g.hwmode.getValue()}}})}(jQuery),$.su.modelManager.define("ffsModel",{type:"model",fields:[{name:"enable"}],proxy:{url:$.su.url("/admin/ffs?form=config")}}),$.su.modelManager.define("wireless24g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,a=!0;for(s in $.su.securityCode)$.su.securityCode[s]==e.encryption&&(a=!1);a&&(e.encryption="");var i=e.hwmode,n=e.capability&&e.capability.channel_2g,r=e.channel;if(n)switch(n&&13<n.length&&(n=function(e,s){if(!e)return[];var a=[],i=(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a}(n,20),"b"!=i&&n.pop(),!function(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1;return}(r,n))&&(e.channel="auto"),i){case"b":case"g":case"bg":e.htmode="auto"}return e},proxy:"wirelessModule24gProxy"}),$.su.define("wirelessModule24gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_2g"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless24gControl",{type:"model",fields:[{name:"totalField"},{name:"editField"},{name:"wpaPersonal24g"},{name:"wpa3Personal24g"},{name:"wpaEnterprise24g"},{name:"wep24g"}]}),$.su.storeManager.define("hwmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel2gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless2gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_2g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(p){p.su.moduleManager.define("wirelessAdv5g1",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g1Store","htmode5g1Store","channel5g1Store"],models:["wireless5g1","wireless5g1Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g1View","wirelessAdv5g1ViewBasic","wirelessAdv5g1ViewQs"],listeners:{ev_on_launch:function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=p.Deferred(),i.wireless5g1.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(i,e,n,s,r,l){this.listen({"models.wireless5g1.enable":{ev_value_change:function(e,s,a){"on"===s?(this.disableAll=!1,n.wireless5g1Control.editField.show(),p.inArray("5g1",l.device.getConfig().supportMUMIMO)<0&&(n.wireless5g1.mimo.hide(),n.wireless5g1.mimo.disable()),!0===l.device.getConfig().supportOfdmaMumimo&&n.wireless5g1.mimo.hide()):(this.disableAll=!0,n.wireless5g1Control.editField.hide()),a&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g1.encryption":{ev_value_change:function(e,s,a){switch(n.wireless5g1Control.wpaPersonal5g1.hide(),n.wireless5g1Control.wpaEnterprise5g1.hide(),s){case p.su.securityCode.no_security:n.wireless5g1Control.wpaPersonal5g1.hide(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:n.wireless5g1.pskKey.setVtype("psk_password"),n.wireless5g1Control.wpaPersonal5g1.show(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:n.wireless5g1.pskKey.setVtype("wpa3_password"),n.wireless5g1Control.wpaPersonal5g1.show(),n.wireless5g1Control.wpaEnterprise5g1.hide();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:n.wireless5g1Control.wpaEnterprise5g1.show(),n.wireless5g1Control.wpaPersonal5g1.hide()}s==p.su.securityCode.psk_aes_tkip||s==p.su.securityCode.wpa_enterprise_tkip?n.wireless5g1.hwmode.disableItems(["ax_5"]):n.wireless5g1.hwmode.enableItems(["ax_5"]),s==p.su.securityCode.no_security||s==p.su.securityCode.psk_aes_tkip?n.wireless5g1.encryption.setTips(p.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):n.wireless5g1.encryption.setTips("")}},"models.wireless5g1.hwmode":{ev_value_change:function(e,s,a){switch(s){case"a_5":n.wireless5g1.htmode.disableItems(["40"]),n.wireless5g1.htmode.disableItems(["80"]),n.wireless5g1.htmode.setValue("auto"),n.wireless5g1.htmode.hide();break;case"n_5":case"an_5":var i=n.wireless5g1.htmode.getValue();n.wireless5g1.htmode.enableItems(["40"]),n.wireless5g1.htmode.disableItems(["80"]),"80"==i&&n.wireless5g1.htmode.setValue("auto"),n.wireless5g1.htmode.show();break;default:n.wireless5g1.htmode.enableItems(["40"]),n.wireless5g1.htmode.enableItems(["80"]),n.wireless5g1.htmode.show()}"ax_5"==s?n.wireless5g1.encryption.disableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]):n.wireless5g1.encryption.enableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]),a&&!0===l.device.getConfig().supportOfdmaMumimo&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g1.htmode":{ev_value_change:function(e,s,a){i.set160MhzTips(),i.resetChannel(s)}},"models.wireless5g1.channel":{ev_value_change:function(e,s,a){i.set160MhzTips()}},"models.wireless5g1":{ev_loaded:function(e,s){l.ajax.request({proxy:"sysWireless5g1Proxy",data:{operation:"read"},success:function(e){e&&n.wireless5g1&&n.wireless5g1.channel&&("on"==e.ENABLE?n.wireless5g1.channel.disable():n.wireless5g1.channel.enable())}}),i.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(n,r,d,u,g,l){var t=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144];return{dfd:null,SYS_WIRELESS_5G1_URL:p.su.url("/admin/wireless?form=syspara_5g"),onDestroy:function(){var e=l.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=d.regionWirelessCapabilityModel.channel5g.getValue();if(g.utils.isEmptyObject(e))d.wireless5g1Control.totalField.hide();else{d.wireless5g1Control.totalField.show();var s=d.regionWirelessCapabilityModel.hwmode5g.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=p.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],a.push(r)}u.hwmode5g1Store.loadData(a)}var t=d.regionWirelessCapabilityModel.htmode5g.getValue();if(t){for(var o=[],i=t.length,n=0;n<i;n++){r={};switch(t[n]){case"20":r.name="20"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":r.name="20/40"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":r.name="20/40/80"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=t[n]+p.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=t[n],o.push(r)}u.htmode5g1Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),i=g.wirelessSettings.region,n=["AU","CA"].includes(i)?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=a;r++){var l={},t=parseInt(e[r]);-1<p.inArray(t,n)&&(l.name=t,l.value=t,s.push(l))}return s},channelDFS:function(e){for(var s=[],a=l.device.getConfig().country,i=0;i<e.length;i++)s.push(e[i]),t.includes(e[i].value)&&"RU"!=a&&(s[i].name+="(DFS)");return s},resetChannel:function(e){var s=d.regionWirelessCapabilityModel.channel5g.getValue(),a=d.wireless5g1.channel.getValue();switch(e){case"20":var i=n.getHtChannel(s,20);u.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g1.channel.setValue(a):d.wireless5g1.channel.setValue("auto");break;case"40":i=n.getHtChannel(s,40);u.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g1.channel.setValue(a):d.wireless5g1.channel.setValue("auto");break;case"80":i=n.getHtChannel(s,80);u.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g1.channel.setValue(a):d.wireless5g1.channel.setValue("auto");break;case"160":i=n.get_ht_channel_160(s,160);u.channel5g1Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g1.channel.setValue(a):d.wireless5g1.channel.setValue("auto")}},beforeSubmit:function(){var e=d.wireless5g1.server.getValue(),s=d.wireless5g1.encryption.getValue(),a=d.wireless5g1.enable.getValue();return d.wireless5g1.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s&&d.wireless5g1.server.setValidator(function(){return g.utils.ipToInt(e)!=g.utils.ipToInt(g.wirelessSettings.getLanIP())||p.su.CHAR.ERROR["00000077"]}),d.wireless5g1.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=r[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s="on"===d.wireless5g1.enable.getValue(),a=d.wireless5g1.ssid.getValue(),i=d.wireless5g1.encryption.getValue();switch(d.wireless5g1.encryption.getValue()){case p.su.securityCode.no_security:e="";break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:e=d.wireless5g1.pskKey.getValue();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:e=d.wireless5g1.wpaKey.getValue()}return{enable:s,ssid:a,password:e,security:i}},syncMainModel:function(){var e,s=d.wireless5g1.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n=s[a[i]];s["wireless_5g_"+a[i]]=n,delete s[a[i]]}return s},setEnableLabel:function(e){e?(d.wireless5g1Control.totalField.hide(),d.wireless5g1Control.channelField.show(),l.device.getIsTriband()?(d.wireless5g1.htmode.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G1),d.wireless5g1.channel.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G1)):(d.wireless5g1.htmode.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH_5G),d.wireless5g1.channel.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_5G))):(d.wireless5g1Control.totalField.show(),d.wireless5g1Control.channelField.hide(),d.wireless5g1.htmode.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL_WIDTH),d.wireless5g1.channel.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.CHANNEL))},set5g1Name:function(){d.wireless5g1.enable.setLabelField(p.su.CHAR.WIRELESS_SETTINGS.MODE_5G)},getHwMode:function(){return d.wireless5g1.hwmode.getValue()},set160MhzTips:function(){var e=d.wireless5g1.htmode.getValue(),s="",a=-1<d.wireless5g1.channel.getText().search("DFS"),i=l.device.getConfig().supportOverlapWithDFS;(a||!i&&"160"==e)&&(s=p.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),d.wireless5g1.channel.setTips(s)}}})}(jQuery),$.su.modelManager.define("wireless5g1",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,a,i,n=e.htmode,r=e.capability&&e.capability.channel_5g,l=e.channel,t=!0;for(i in $.su.securityCode)$.su.securityCode[i]==e.encryption&&(t=!1);t&&(e.encryption="");var o=e.hwmode,d=e.country.toUpperCase();if(r){switch(n){case"20":a(l,s(r,20))||(e.channel="80");break;case"40":a(l,s(r,40))||(e.channel="80");break;case"80":a(l,s(r,80))||(e.channel="80");break;case"160":a(l,function(e){for(var s,a=[],i=(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),n=["AU","CA"].includes(d)?[36,40,44,48,52,56,60,64]:[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=i;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,a.push(l))}return a}(r))||(e.channel="80")}switch(o){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==n&&(e.htmode="auto")}"auto"==e.htmode&&(e.htmode="80")}return e;function s(e,s){if(!e)return[];var a=[],i=(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a}function a(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}},proxy:"wirelessModule5g1Proxy"}),$.su.define("wirelessModule5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g1Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g1"},{name:"wpa3Personal5g1"},{name:"wpaEnterprise5g1"},{name:"wep5g1"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g1Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g1Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(p){p.su.moduleManager.define("wirelessAdv5g2",{services:["moduleManager","ajax","device"],stores:["encryptionStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode5g2Store","htmode5g2Store","channel5g2Store"],models:["wireless5g2","wireless5g2Control","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv5g2View","wirelessAdv5g2ViewBasic","wirelessAdv5g2ViewQs"],listeners:{ev_on_launch:function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=p.Deferred(),i.wireless5g2.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(i,e,n,s,r,l){this.listen({"models.wireless5g2.enable":{ev_value_change:function(e,s,a){"on"===s?(this.disableAll=!1,n.wireless5g2Control.editField.show(),p.inArray("5g2",l.device.getConfig().supportMUMIMO)<0&&(n.wireless5g2.mimo.hide(),n.wireless5g2.mimo.disable()),!0===l.device.getConfig().supportOfdmaMumimo&&n.wireless5g2.mimo.hide()):(this.disableAll=!0,n.wireless5g2Control.editField.hide()),a&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g2.encryption":{ev_value_change:function(e,s,a){switch(n.wireless5g2Control.wpaPersonal5g2.hide(),n.wireless5g2Control.wpaEnterprise5g2.hide(),s){case p.su.securityCode.no_security:n.wireless5g2Control.wpaPersonal5g2.hide(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:n.wireless5g2.pskKey.setVtype("psk_password"),n.wireless5g2Control.wpaPersonal5g2.show(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:n.wireless5g2.pskKey.setVtype("wpa3_password"),n.wireless5g2Control.wpaPersonal5g2.show(),n.wireless5g2Control.wpaEnterprise5g2.hide();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:n.wireless5g2Control.wpaEnterprise5g2.show(),n.wireless5g2Control.wpaPersonal5g2.hide()}s==p.su.securityCode.psk_aes_tkip||s==p.su.securityCode.wpa_enterprise_tkip?n.wireless5g2.hwmode.disableItems(["ax_5"]):n.wireless5g2.hwmode.enableItems(["ax_5"]),s==p.su.securityCode.no_security||s==p.su.securityCode.psk_aes_tkip?n.wireless5g2.encryption.setTips(p.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP):n.wireless5g2.encryption.setTips("")}},"models.wireless5g2.hwmode":{ev_value_change:function(e,s,a){switch(s){case"a_5":n.wireless5g2.htmode.disableItems(["40"]),n.wireless5g2.htmode.disableItems(["80"]),n.wireless5g2.htmode.setValue("auto"),n.wireless5g2.htmode.hide();break;case"n_5":case"an_5":var i=n.wireless5g2.htmode.getValue();n.wireless5g2.htmode.enableItems(["40"]),n.wireless5g2.htmode.disableItems(["80"]),"80"==i&&n.wireless5g2.htmode.setValue("auto"),n.wireless5g2.htmode.show();break;default:n.wireless5g2.htmode.enableItems(["40"]),n.wireless5g2.htmode.enableItems(["80"]),n.wireless5g2.htmode.show()}"ax_5"==s?n.wireless5g2.encryption.disableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]):n.wireless5g2.encryption.enableItems([p.su.securityCode.psk_aes_tkip,p.su.securityCode.wpa_enterprise_tkip]),a&&!0===l.device.getConfig().supportOfdmaMumimo&&r.wirelessSettings.modeChangeSet()}},"models.wireless5g2.htmode":{ev_value_change:function(e,s,a){i.set160MhzTips(),i.resetChannel(s)}},"models.wireless5g2.channel":{ev_value_change:function(e,s,a){i.set160MhzTips()}},"models.wireless5g2":{ev_loaded:function(e,s){l.ajax.request({proxy:"sysWireless5g2Proxy",data:{operation:"read"},success:function(e){e&&n.wireless5g2&&n.wireless5g2.channel&&("on"==e.ENABLE?n.wireless5g2.channel.disable():n.wireless5g2.channel.enable())}}),i.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}}})}},function(n,r,d,u,g,l){var t=[52,56,60,64,100,104,108,112,116,120,124,128,132,136,140,144];return{dfd:null,SYS_WIRELESS_5g2_URL:p.su.url("/admin/wireless?form=syspara_5g_2"),onDestroy:function(){var e=l.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",n.handleRegionInfo)},handleRegionInfo:function(){var e=d.regionWirelessCapabilityModel.channel5g2.getValue();if(g.utils.isEmptyObject(e))d.wireless5g2Control.totalField.hide();else{d.wireless5g2Control.totalField.show();var s=d.regionWirelessCapabilityModel.hwmode5g2.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var r={},l="MODE_"+s[n].toUpperCase();r.name=p.su.CHAR.WIRELESS_SETTINGS[l],r.value=s[n],a.push(r)}u.hwmode5g2Store.loadData(a)}var t=d.regionWirelessCapabilityModel.htmode5g2.getValue();if(t){for(var o=[],i=t.length,n=0;n<i;n++){r={};switch(t[n]){case"20":r.name="20"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"40":r.name="20/40"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"80":r.name="20/40/80"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+p.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=t[n]+p.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=t[n],o.push(r)}u.htmode5g2Store.loadData(o)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[],i=(a[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a},get_ht_channel_160:function(e){for(var s=[],a=(s[0]={name:p.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),i=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],n=0;n<=a;n++){var r={},l=parseInt(e[n]);-1<p.inArray(l,i)&&(r.name=l,r.value=l,s.push(r))}return s},channelDFS:function(e){for(var s=[],a=l.device.getConfig().country,i=0;i<e.length;i++)s.push(e[i]),t.includes(e[i].value)&&"RU"!=a&&(s[i].name+="(DFS)");return s},resetChannel:function(e){var s=d.regionWirelessCapabilityModel.channel5g2.getValue(),a=d.wireless5g2.channel.getValue();switch(e){case"20":var i=n.getHtChannel(s,20);u.channel5g2Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g2.channel.setValue(a):d.wireless5g2.channel.setValue("auto");break;case"40":i=n.getHtChannel(s,40);u.channel5g2Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g2.channel.setValue(a):d.wireless5g2.channel.setValue("auto");break;case"80":i=n.getHtChannel(s,80);u.channel5g2Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g2.channel.setValue(a):d.wireless5g2.channel.setValue("auto");break;case"160":i=n.get_ht_channel_160(s,160);u.channel5g2Store.loadData(n.channelDFS(i)),g.utils.valInObjArr(a,i)?d.wireless5g2.channel.setValue(a):d.wireless5g2.channel.setValue("auto")}},beforeSubmit:function(){var e=d.wireless5g2.server.getValue(),s=d.wireless5g2.encryption.getValue(),a=d.wireless5g2.enable.getValue();return d.wireless5g2.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s&&d.wireless5g2.server.setValidator(function(){return g.utils.ipToInt(e)!=g.utils.ipToInt(g.wirelessSettings.getLanIP())||p.su.CHAR.ERROR["00000077"]}),d.wireless5g2.validate()},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,e=e.security,i=r[this.getEffectiveView()].wifisharing;i&&i.setValue({ssid:s,password:a,security:e})},getWifiInfo:function(){var e,s="on"===d.wireless5g2.enable.getValue(),a=d.wireless5g2.ssid.getValue(),i=d.wireless5g2.encryption.getValue();switch(d.wireless5g2.encryption.getValue()){case p.su.securityCode.no_security:e="";break;case p.su.securityCode.psk_aes:case p.su.securityCode.psk_aes_tkip:case p.su.securityCode.psk_sae_personal:case p.su.securityCode.psk_sae_personal_aes:e=d.wireless5g2.pskKey.getValue();break;case p.su.securityCode.wpa_enterprise:case p.su.securityCode.wpa_enterprise_tkip:e=d.wireless5g2.wpaKey.getValue()}return{enable:s,ssid:a,password:e,security:i}},setEnableLabel:function(e){e?(d.wireless5g2Control.totalField.hide(),d.wireless5g2Control.channelField.show()):(d.wireless5g2Control.totalField.show(),d.wireless5g2Control.channelField.hide())},syncMainModel:function(){var e,s=d.wireless5g2.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n=s[a[i]];s["wireless_5g_2_"+a[i]]=n,delete s[a[i]]}return s},getHwMode:function(){return d.wireless5g2.hwmode.getValue()},set160MhzTips:function(){var e=d.wireless5g2.htmode.getValue(),s="",a=-1<d.wireless5g2.channel.getText().search("DFS"),i=l.device.getConfig().supportOverlapWithDFS;(a||!i&&"160"==e)&&(s=p.su.CHAR.WIRELESS_SETTINGS.ENABLE_160_MHZ_NOTE_DFS),d.wireless5g2.channel.setTips(s)}}})}(jQuery),$.su.modelManager.define("wireless5g2",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption",allowBlank:!1},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s,a=!0;for(s in $.su.securityCode)$.su.securityCode[s]==e.encryption&&(a=!1);a&&(e.encryption="");e.hwmode;var i=e.hwmode,n=e.htmode,r=e.channel,l=e.capability&&e.capability.channel_5g_2;if(l){switch(i){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==n&&(e.htmode="auto")}switch(n){case"20":case"40":case"80":t(r,function(e,s){if(!e)return[];var a=[],i=(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length);if(!(s%20))for(var n=-1,r=0,l=0;l<=i;l++){var t={},o=parseInt(e[l]);if(n<0||n+4==o)r+=20;else{for(;r%s;)a.pop(),r-=20;if(isNaN(o))break;r=20}t.name=n=o,t.value=o,a.push(t)}return a}(l,parseInt(n)))||(e.channel="80");break;case"160":t(r,function(e){for(var s,a=[],i=(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},e.length),n=[36,40,44,48,52,56,60,64,100,104,108,112,116,120,124,128],r=0;r<=i;r++){var l={};s=parseInt(e[r]),-1<$.inArray(s,n)&&(l.name=s,l.value=s,a.push(l))}return a}(l,parseInt(n)))||(e.channel="80")}"auto"==e.htmode&&(e.htmode="80")}return e;function t(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1}},proxy:"wirelessModule5g2Proxy"}),$.su.define("wirelessModule5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_5g_2"),writeFilter:function(e){return{operation:"read_spf"}},sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless5g2Control",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpaPersonal5g2"},{name:"wpa3Personal5g2"},{name:"wpaEnterprise5g2"},{name:"wep5g2"},{name:"channelField"}]}),$.su.storeManager.define("hwmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel5g2Store",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless5g2Proxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_5g_2"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}}),function(u){u.su.moduleManager.define("wirelessAdv6g",{services:["moduleManager","ajax","device"],stores:["encryption6GStore","wirelessVersionStore","wirelessVersionEpStore","wirelessCipherStore","wirelessWpa3VersionStore","wireless5gWpa3CipherStore","wepTypeStore","wepKeySelectedStore","wepKeyFormatStore","wepKeyTypeStore","transPowerStore","hwmode6gStore","htmode6gStore","channel6gStore"],models:["wireless6g","wireless6gControl","regionWirelessCapabilityModel","quickSetupModel"],deps:["utils","wirelessSettings"],views:["wirelessAdv6gView","wirelessAdv6gViewBasic","wirelessAdv6gViewQs"],listeners:{ev_on_launch:function(e,s,a,i,n,r,l){s.handleRegionInfo(),s.dfd=u.Deferred(),i.wireless6g.load({success:function(){s.dfd.resolve()}})},ev_before_destroy:function(){}},init:function(n,i,r,e,l,t){this.listen({"models.wireless6g.enable":{ev_value_change:function(e,s,a){"on"===s?(this.disableAll=!1,r.wireless6gControl.editField.show(),u.inArray("6g",t.device.getConfig().supportMUMIMO)<0&&(r.wireless6g.mimo.hide(),r.wireless6g.mimo.disable()),!0===t.device.getConfig().supportOfdmaMumimo&&r.wireless6g.mimo.hide()):(this.disableAll=!0,r.wireless6gControl.editField.hide()),a&&l.wirelessSettings.modeChangeSet()}},"models.wireless6g.psc":{ev_value_change:function(e,s,a){var i=r.wireless6g.htmode.getValue();n.resetChannel(i,s)}},"models.wireless6g.htmode":{ev_value_change:function(e,s,a){null!==a&&n.resetChannel(s)}},"models.wireless6g":{ev_loaded:function(e,s){t.ajax.request({proxy:"sysWireless6gProxy",data:{operation:"read"},success:function(e){e&&r.wireless6g&&r.wireless6g.channel&&("on"==e.ENABLE?r.wireless6g.channel.disable():r.wireless6g.channel.enable(),r.wireless6g.hwmode.setValue("ax_5"),r.wireless6g.hwmode.record(),i.wirelessAdv6gViewBasic.hwmodeShow.setValue(u.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5),i.wirelessAdv6gView.hwmodeShow.setValue(u.su.CHAR.WIRELESS_SETTINGS.MODE_AX_5))}}),n.resetChannel(s.htmode),this.syncWifiSharingData()},ev_model_submit:function(e,s){this.syncWifiSharingData()},ev_will_auto_save:function(e,s){s.preventDefault()}},"models.wireless6g.encryption":{ev_value_change:function(e,s,a){switch(r.wireless6gControl.wpa3Personal6g.hide(),r.wireless6gControl.wpaEnterprise6g.hide(),r.wireless6gControl.wep6g.hide(),s){case"psk_sae":r.wireless6g.encryption.setTips(""),r.wireless6gControl.wpa3Personal6g.show(),r.wireless6g.pskCipher.hide(),r.wireless6g.pskVersion.setValue("sae_only"),r.wireless6g.pskVersion.record(),i.wirelessAdv6gView.pskVersionShow.setValue(u.su.CHAR.WIRELESS_SETTINGS.WPA3_SAE),r.wireless6g.pskKey.setVtype("wpa3_password");break;case"owe":r.wireless6g.encryption.setTips(u.su.CHAR.WIRELESS_SETTINGS.NOT_CONSIDERED_TIP),r.wireless6g.pskVersion.setValue("owe_only")}n.setWpa3VersionTip()}},"models.wireless6g.hwmode":{ev_value_change:function(e,s,a){a&&!0===t.device.getConfig().supportOfdmaMumimo&&l.wirelessSettings.modeChangeSet()}}})}},function(r,l,t,o,d,s){return{dfd:null,SYS_WIRELESS_6g_URL:u.su.url("/admin/wireless?form=syspara_6g"),onDestroy:function(){var e=s.moduleManager.get("wirelessSettings");e&&e.off("ev_region_reload",r.handleRegionInfo)},handleRegionInfo:function(){var e=t.regionWirelessCapabilityModel.channel6g.getValue();if(d.utils.isEmptyObject(e))t.wireless6gControl.totalField.hide();else{t.wireless6gControl.totalField.show();var s=t.regionWirelessCapabilityModel.htmode6g.getValue();if(s){for(var a=[],i=s.length,n=0;n<i;n++){var r={};switch(s[n]){case"80":r.name="20/40/80"+u.su.CHAR.WIRELESS_SETTINGS.MHZ;break;case"160":r.name="20/40/80/160"+u.su.CHAR.WIRELESS_SETTINGS.MHZ;break;default:r.name=s[n]+u.su.CHAR.WIRELESS_SETTINGS.MHZ}r.value=s[n],a.push(r)}o.htmode6gStore.loadData(a)}}},disableAll:!1,getHtChannel:function(e,s){if(!e)return[];var a=[];switch(s){case"auto":case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var i=0;i<e.length;i++){var n={},r=parseInt(e[i]);n.name=r,n.value=r,a.push(n)}return a},channelDFSandPSC:function(e){var s=[];s[0]={name:u.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(var a=0;a<e.length;a++)e[a].value=parseInt(e[a].value),5!=e[a].value&&21!=e[a].value&&37!=e[a].value&&53!=e[a].value&&69!=e[a].value&&85!=e[a].value&&101!=e[a].value&&117!=e[a].value&&133!=e[a].value&&149!=e[a].value&&165!=e[a].value&&181!=e[a].value&&197!=e[a].value&&213!=e[a].value&&229!=e[a].value||(e[a].name+="(PSC)"),s.push(e[a]);return s},channelPSC:function(e){var s=[];s[0]={name:u.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"};for(var a=0;a<e.length;a++){var i=parseInt(e[a].value);37!=i&&53!=i&&69!=i&&85!=i&&101!=i&&117!=i&&133!=i&&149!=i&&165!=i&&181!=i&&197!=i&&213!=i&&229!=i||s.push({name:e[a].name+"(PSC)",value:parseInt(e[a].value)})}return s},resetChannel:function(e,s){var a=t.regionWirelessCapabilityModel.channel6g.getValue(),i=t.wireless6g.channel.getValue(),s=s||t.wireless6g.psc.getValue(),n={},n=r.getHtChannel(a,e);n="on"==s?r.channelPSC(n):r.channelDFSandPSC(n),o.channel6gStore.loadData(n),d.utils.valInObjArr(i,n)?t.wireless6g.channel.setValue(i):t.wireless6g.channel.setValue("auto")},setWepEncrpyVtype:function(){var e,s=t.wireless6g.wepFormat1.getValue(),a=t.wireless6g.wepType1.getValue();"asic"==s?"64"==a?e="asic_64":"128"==a&&(e="asic_128"):"hex"==s&&("64"==a?e="hex_64":"128"==a&&(e="hex_128")),t.wireless6g.wepKey1.setVtype(e)},beforeSubmit:function(){var e=t.wireless6g.server.getValue(),s=t.wireless6g.encryption.getValue(),a=t.wireless6g.enable.getValue();return t.wireless6g.disabled_all.setValue(this.disableAll?"on":"off"),"on"==a&&"wpa"==s?t.wireless6g.server.setValidator(function(){return d.utils.ipToInt(e)!=d.utils.ipToInt(d.wirelessSettings.getLanIP())||u.su.CHAR.ERROR["00000077"]}):"on"==a&&"wep"==s&&r.setWepEncrpyVtype(),t.wireless6g.validate()},syncQsData:function(){var e=t.wireless6g.getData();return!(!t.wireless6g.pskKey.validate()||!t.wireless6g.ssid.validate()||(t.quickSetupModel.replaceData({wireless6gEnable:e.enable,wireless6gSsid:e.ssid,wireless6gEncryPassword:e.pskKey,wireless6gDisabledAll:"on"===e.enable?"off":"on",wireless6gregionEnable:"on"}),e.pskKey?t.quickSetupModel.replaceData({wireless6gPskKey:e.pskKey,wireless6gEncryption:"psk_sae",wireless6gPskVersion:"sae_only",wireless6gPskCipher:"auto"}):t.quickSetupModel.replaceData({wireless6gEncryption:"none"}),0))},isQsDirty:function(){for(var e=t.wireless6g,s=[e.enable,e.ssid,e.pskKey],a=0,i=s.length;a<i;a++)if(s[a].isDirty())return!0},syncWifiSharingData:function(){var e=this.getWifiInfo(),s=e.ssid,a=e.password,i=e.security,n=l[this.getEffectiveView()].wifisharing;n&&n.setValue({ssid:s,password:a,security:i,pskVersion:e.pskVersion})},getWifiInfo:function(){var e,s,a,i="on"===t.wireless6g.enable.getValue(),n=t.wireless6g.ssid.getValue();switch(t.wireless6g.encryption.getValue()){case"psk_sae":e=t.wireless6g.pskKey.getValue(),s="psk_sae",a=t.wireless6g.pskVersion.getValue();break;case"owe":e="",s="owe";break;default:e="",s="none"}return{enable:i,ssid:n,password:e,security:s,pskVersion:a}},syncMainModel:function(){var e,s=t.wireless6g.getData("submit",!0),a=[];for(e in s)a.push(e);for(var i=0;i<a.length;i++){var n=s[a[i]];s["wireless_6g_"+a[i]]=n,delete s[a[i]]}return"owe"==s.wireless_6g_encryption?s["wireless_6g_psk_version"]="owe_only":"psk_sae"==s.wireless_6g_encryption&&(s["wireless_6g_psk_version"]="sae_only"),s},dataChangeOn24g:function(e,s){void 0!==e?(l.wirelessAdv6gViewQs.wirelessQsAll.disable(),currentSsid=t.wireless6g.ssid.getValue(),t.wireless6g.ssid.setValue(e),t.wireless6g.pskKey.setValue(s)):l.wirelessAdv6gViewQs.wirelessQsAll.enable()},disableQsAll:function(){l.wirelessAdv6gViewQs.wirelessQsAll.disable()},getHwMode:function(){return t.wireless6g.hwmode.getValue()},getWirelessEnable:function(){return t.wireless6g.enable.getValue()},setWpa3VersionTip:function(){var e=t.wireless6g.encryption.getValue(),s=t.wireless6g.pskVersion.getValue();"psk_sae"==e&&"sae_only"==s?t.wireless6g.pskVersion.setTips(u.su.CHAR.WIRELESS_SETTINGS.VERSION_TIP):t.wireless6g.pskVersion.setTips("")}}})}(jQuery),$.su.modelManager.define("wireless6g",{type:"model",fields:[{name:"enable",mapping:"enable"},{name:"disabled_all"},{name:"disabled_by",disabled:!0},{name:"ssid",mapping:"ssid",vtype:"string_visible_allow_blank",maxLength:32,allowBlank:!1},{name:"hidden",mapping:"hidden"},{name:"encryption",mapping:"encryption"},{name:"pskVersion",mapping:"psk_version"},{name:"pskCipher",mapping:"psk_cipher"},{name:"pskKey",mapping:"psk_key",allowBlank:!1,vtype:"psk_password"},{name:"wpaVersion",mapping:"wpa_version"},{name:"wpaCipher",mapping:"wpa_cipher"},{name:"server",mapping:"server",vtype:"ip",allowBlank:!1},{name:"port",mapping:"port",vtype:{vtype:"number",min:1,max:65535},allowBlank:!1},{name:"wpaKey",mapping:"wpa_key",vtype:"password",maxLength:64,allowBlank:!1},{name:"wepMode",mapping:"wep_mode"},{name:"wepFormat1",mapping:"wep_format1"},{name:"wepType1",mapping:"wep_type1"},{name:"wepKey1",mapping:"wep_key1",allowBlank:!1},{name:"hwmode",mapping:"hwmode"},{name:"htmode",mapping:"htmode"},{name:"channel",mapping:"channel"},{name:"txpower",mapping:"txpower"},{name:"disabled",mapping:"disabled",disabled:!0},{name:"psc",mapping:"psc"},{name:"mimo",mapping:"mu_mimo"}],convert:function(e){var s=e.encryption,a=e.psk_cipher,i=e.hwmode,n=e.wpa_cipher,r=e.hwmode,l=e.htmode,t=e.channel,o=e.capability&&e.capability.channel_6g;if(o){switch(s){case"psk":"tkip"!=a||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.psk_cipher="auto");break;case"wpa":"tkip"!=n||"n_5"!=i&&"ac_5"!=i&&"nac_5"!=i||(e.wpa_cipher="auto")}switch(r){case"a_5":e.htmode="auto";break;case"n_5":case"an_5":"80"==l&&(e.htmode="auto")}switch(l){case"auto":l="20";case"20":case"40":case"80":case"160":!function(e,s){for(var a=s.length,i=0;i<a;i++)if(e==s[i].value)return 1;return}(t,function(e,s){if(!e)return[];var a=[];switch(a[0]={name:$.su.CHAR.WIRELESS_SETTINGS.AUTO,value:"auto"},s){case"20":break;case"40":0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1);break;case"80":case"160":0<=e.indexOf("225")&&e.splice(e.indexOf("225"),1),0<=e.indexOf("229")&&e.splice(e.indexOf("229"),1),0<=e.indexOf("233")&&e.splice(e.indexOf("233"),1)}for(var i=0;i<e.length;i++){var n={},r=parseInt(e[i]);n.name=r,n.value=r,a.push(n)}return a}(o,l))&&(e.channel="auto")}}return e},proxy:"wirelessModule6gProxy"}),$.su.define("wirelessModule6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=wireless_6g"),sync:function(e){var s=e.operation,a=this,i=e.success;"read"===s?this.read.call(this,$.extend({},e,{success:function(s){a.read.call(a,$.extend({},e,{success:function(e){e=$.extend(s,e);a.trigger("ev_load",[e]),i.call(a,e)},url:$.su.url("/admin/wireless?form=region")}),!1)}}),!1):this.write.apply(this,[e])}}),$.su.modelManager.define("wireless6gControl",{type:"model",fields:[{name:"editField"},{name:"totalField"},{name:"wpa3Personal6g"},{name:"wpaEnterprise6g"},{name:"wep6g"}]}),$.su.storeManager.define("hwmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("htmode6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.storeManager.define("channel6gStore",{type:"store",fields:[{name:"name"},{name:"value"}]}),$.su.define("sysWireless6gProxy",{extend:"IPFProxy",url:$.su.url("/admin/wireless?form=syspara_6g"),readFilter:function(e){return void 0!==(e=e.data)&&{ENABLE:e.enable}}});